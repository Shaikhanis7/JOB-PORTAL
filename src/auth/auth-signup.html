<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Account - Job Portal</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        colors: {
          primary: "#265DF5",
          secondary: "#0CADF3",
          darkblue: "#0A1A2F",
          baselight: "#F4F6FA",
        },
      },
    },
  };
</script>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<!-- Notyf -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
<script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>

<style>
  body { font-family: 'Poppins', sans-serif; }
</style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center p-4">

  <!-- Back Button -->
  <button id="back"
          class="absolute top-6 right-6 flex items-center space-x-2 text-white 
                 bg-gradient-to-r from-primary to-secondary 
                 px-4 py-2 rounded-lg 
                 hover:from-secondary hover:to-primary 
                 hover:-translate-y-1 hover:scale-105 
                 transition-all duration-300 ease-in-out">
    <i class="fas fa-arrow-left"></i>
    <span>Back</span>
  </button>

  <!-- Signup Card -->
  <div class="w-full max-w-3xl bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row">

    <!-- Left Image -->
    <div class="hidden md:flex flex-1 bg-gradient-to-br from-primary to-secondary justify-center items-center">
      <img src="./Hire Web System Developers _ Skilled Programmers for Hire.jpeg" 
           alt="Illustration" 
           class="w-[80%] rounded-2xl shadow-xl object-cover" />
    </div>

    <!-- Right Form -->
    <div class="flex-1 p-10 flex flex-col justify-center relative">
      <h2 class="text-3xl font-bold text-darkblue mb-2">Create Account</h2>
      <p class="text-gray-500 mb-6">Fill in your details to get started</p>

      <form id="signup-form" class="space-y-4">
        <!-- Full Name -->
        <div class="relative">
          <i class="fas fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
          <input type="text" id="fullName" placeholder="Full Name"
                 class="w-full pl-10 pr-4 py-3 rounded-xl border border-gray-300 bg-baselight text-darkblue focus:ring-2 focus:ring-primary focus:outline-none transition" />
        </div>
        <p id="error-fullName" class="text-red-500 text-sm hidden"></p>

        <!-- Email -->
        <div class="relative">
          <i class="fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
          <input type="email" id="email" placeholder="Email address"
                 class="w-full pl-10 pr-4 py-3 rounded-xl border border-gray-300 bg-baselight text-darkblue focus:ring-2 focus:ring-primary focus:outline-none transition" />
        </div>
        <p id="error-email" class="text-red-500 text-sm hidden"></p>

        <!-- Password -->
        <div class="relative">
          <i class="fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
          <input type="password" id="password" placeholder="Password"
                 class="w-full pl-10 pr-10 py-3 rounded-xl border border-gray-300 bg-baselight text-darkblue focus:ring-2 focus:ring-primary focus:outline-none transition" />
          <i class="fas fa-eye toggle-password absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer" data-target="password"></i>
        </div>
        <p id="error-password" class="text-red-500 text-sm hidden"></p>

        <!-- Confirm Password -->
        <div class="relative">
          <i class="fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
          <input type="password" id="confirm-password" placeholder="Confirm Password"
                 class="w-full pl-10 pr-10 py-3 rounded-xl border border-gray-300 bg-baselight text-darkblue focus:ring-2 focus:ring-primary focus:outline-none transition" />
          <i class="fas fa-eye toggle-password absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer" data-target="confirm-password"></i>
        </div>
        <p id="error-confirm" class="text-red-500 text-sm hidden"></p>

        <!-- Sign Up Button -->
        <button type="submit"
                class="w-full py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-primary to-secondary hover:shadow-lg hover:-translate-y-1 transition-all duration-300">
          Sign Up
        </button>
      </form>

      <!-- Footer -->
      <p class="text-center text-sm text-gray-500 mt-4">
        Already have an account? 
        <a href="./auth-login.html" class="text-primary font-semibold hover:underline">Log in</a>
      </p>
    </div>

  </div>

  <!-- JS -->
  <script>
    // Toggle password visibility
    document.querySelectorAll(".toggle-password").forEach(icon => {
      icon.addEventListener("click", () => {
        const targetId = icon.getAttribute("data-target");
        const input = document.getElementById(targetId);
        if (!input) return;
        input.type = input.type === "password" ? "text" : "password";
        icon.classList.toggle("fa-eye");
        icon.classList.toggle("fa-eye-slash");
      });
    });

    // Form Handling
    const form = document.getElementById("signup-form");
    const fields = {
      fullName: document.getElementById("fullName"),
      email: document.getElementById("email"),
      password: document.getElementById("password"),
      confirm: document.getElementById("confirm-password"),
    };
    const errors = {
      fullName: document.getElementById("error-fullName"),
      email: document.getElementById("error-email"),
      password: document.getElementById("error-password"),
      confirm: document.getElementById("error-confirm"),
    };

    // Notyf instance
    const notyf = new Notyf({
      duration: 3000,
      position: { x: "right", y: "top" },
      ripple: true
    });

    // Validation rules
    const validate = {
      fullName: val => val ? "" : "Full Name is required.",
      email: val => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val) ? "" : "Enter a valid email.",
      password: val => val.length >= 6 ? "" : "Password must be at least 6 characters.",
      confirm: val => val === fields.password.value ? "" : "Passwords do not match.",
    };

    // Live validation
    Object.keys(fields).forEach(key => {
      fields[key].addEventListener("input", () => {
        const message = validate[key](fields[key].value.trim());
        errors[key].textContent = message;
        errors[key].classList.toggle("hidden", !message);
        fields[key].classList.toggle("border-red-500", !!message);
      });
    });

    // On submit
    form.addEventListener("submit", e => {
      e.preventDefault();
      let isValid = true;

      Object.keys(fields).forEach(key => {
        const message = validate[key](fields[key].value.trim());
        errors[key].textContent = message;
        errors[key].classList.toggle("hidden", !message);
        fields[key].classList.toggle("border-red-500", !!message);
        if (message) isValid = false;
      });

      if (!isValid) {
        notyf.error("âš ï¸ Please fix the errors above");
        return;
      }

      // Check if user exists
      let users = [];
      try {
        users = JSON.parse(localStorage.getItem("users")) || [];
      } catch {
        users = [];
      }

      const emailExists = users.some(u => u.email === fields.email.value.trim());
      if (emailExists) {
        notyf.error("âŒ User already exists with this email");
        return;
      }

      // Save new user
      const user = {
        id: Date.now().toString(),
        fullName: fields.fullName.value.trim(),
        email: fields.email.value.trim(),
        password: fields.password.value.trim(),
        role: "user"
      };
      users.push(user);
      localStorage.setItem("users", JSON.stringify(users));

      notyf.success("ðŸŽ‰ Account created successfully!");
      form.reset();

      form.reset();
   setTimeout(() => {
    window.location.href = "./auth-login.html";
  }, 1000)
      // window.location.href=
    });

    const backBtn = document.getElementById("back");

backBtn.addEventListener("click", () => {
  window.location.href = "../../index.html"; // Change this to your homepage path
});
  </script>

</body>
</html>
